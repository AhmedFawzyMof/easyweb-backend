import{_ as f,P as _,f as p,r as x,o as c,c as d,a as e,g as m,v as g,F as u,h,t as y,i as P}from"./index-8f04eNzw.js";const v={name:"AllProducts",components:{ProductCard:_},data(){return{allproducts:[],categories:[],filter:0,change:!1,sort:"",productname:"",limit:20}},mounted(){this.getAllCategories(),document.title="All Products | المنزل"},methods:{async getAllCategories(){this.$store.state.loading=!0;const l=await p.get(`/api/allproducts/${this.limit}`);this.$store.state.loading=!1,this.allproducts=l.data.Products,this.categories=l.data.Categories,this.categories.push({name:"All",id:0,nameAr:"جميع المنتجات"})},sortProducts(l,t){let r=l,a=t;l||(r=this.sort),t||(a=this.allproducts);const o=a.sort((i,n)=>r==="hp"?n.price-i.price:r==="lp"?i.price-n.price:0);this.allproducts=o},async filterProducts(l,t){let r=l;l||(r=this.filter);let a=t;if(t||(a=this.allproducts),r===0){console.log(r),this.getAllCategories();return}if(this.change||(this.change=!0),this.change){this.change=!1,this.$store.state.loading=!0;const i=await p.get(`/api/allproducts/${this.limit}`);this.$store.state.loading=!1,a=i.data.Products}const o=a.filter(i=>i.category===r);this.allproducts=o}}},C={class:"filters flex items-center justify-between"},w={class:"flex ml-2 sm:ml-10 mt-5 z-0 flex-col"},A=e("label",{for:"Filter",class:"block text-sm font-medium text-gray-900"}," Filter By Category ",-1),B=["value"],F={class:"flex mr-2 sm:mr-10 mt-5 z-0 flex-col"},b=e("label",{for:"Filter",class:"block text-sm font-medium text-gray-900"}," Sort By Price ",-1),k=e("option",{value:""},"Default",-1),S=e("option",{value:"hp"},"Higher Price",-1),$=e("option",{value:"lp"},"Lower Price",-1),D=[k,S,$],V={id:"product-collection"},z={class:"mx-auto max-w-screen-xl px-4 py-8 sm:px-6 sm:py-12 lg:px-8"},L=e("h1",null,"Best Selling Products",-1),T={class:"mt-8 grid gap-4 grid-cols-2 lg:grid-cols-4"};function U(l,t,r,a,o,i){const n=x("ProductCard");return c(),d(u,null,[e("div",C,[e("div",w,[A,m(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>o.filter=s),onChange:t[1]||(t[1]=s=>i.filterProducts()),id:"Filter",class:"mt-1.5 w-full rounded-lg border-gray-300 text-gray-700 sm:text-sm"},[(c(!0),d(u,null,h(o.categories,s=>(c(),d("option",{value:s.id},y(s.name),9,B))),256))],544),[[g,o.filter]])]),e("div",F,[b,m(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.sort=s),onChange:t[3]||(t[3]=s=>i.sortProducts()),id:"Filter",class:"mt-1.5 w-full rounded-lg border-gray-300 text-gray-700 sm:text-sm"},D,544),[[g,o.sort]])])]),e("div",V,[e("div",z,[L,e("ul",T,[(c(!0),d(u,null,h(o.allproducts,s=>(c(),P(n,{key:s.id,product:s},null,8,["product"]))),128))])])])],64)}const E=f(v,[["render",U]]);export{E as default};
