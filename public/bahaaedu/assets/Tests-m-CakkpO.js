import{_ as v,s as B,N as V,p as N,m as $,q as z,x as A,y as L,z as R,u as j,a as g,r as o,o as n,c as d,b as u,F as m,l as f,j as a,d as _,w as e,e as H,f as i,t as p}from"./index-ClkC-KWi.js";import{C as S}from"./Card-CMWg7rRX.js";const q={name:"Tests",components:{Card:S,FwbPagination:B,FwbA:V,FwbTable:N,FwbTableBody:$,FwbTableCell:z,FwbTableHead:A,FwbTableHeadCell:L,FwbTableRow:R},data(){return{tests:[],limit:30,currentPage:1,totalPages:1,toast:j(),results:[]}},mounted(){this.getTests(),this.latestResults()},methods:{getTests(){g.get(`/tests/all/${this.limit*this.currentPage}`,{headers:{Authorization:`Bearer ${this.$store.state.token}`}}).then(t=>{this.tests=t.data,this.totalPages=Math.ceil(t.data.length/this.limit)}).catch(t=>{t.response&&t.response.status===401&&(this.toast.error("خطأ: غير مصرح به"),this.$store.commit("logout"),this.$router.push("/bahaaedu/login"))})},latestResults(){g.get("/tests/results",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(t=>{this.results=t.data}).catch(t=>{t.response&&t.response.status===401&&(this.toast.error("خطأ: غير مصرح به"),this.$store.commit("logout"),this.$router.push("/bahaaedu/login"))})}}},D={class:"w-full grid place-items-center"},E={class:"tests mt-10 max-w-screen-xl px-4 sm:px-6 lg:px-8 flex flex-col gap-5"},I={class:"tests grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},M={key:1,class:"p-4 border border-gray-300 rounded-lg"},U={class:"page-navigation w-full flex justify-center"};function G(t,s,J,K,r,h){const w=o("Card"),x=o("FwbPagination"),c=o("fwb-table-head-cell"),y=o("fwb-table-head"),b=o("fwb-table-cell"),T=o("router-link"),k=o("fwb-table-row"),F=o("fwb-table-body"),P=o("fwb-table");return n(),d("main",D,[u("div",E,[s[4]||(s[4]=u("h2",{class:"text-xl font-bold mb-4"},"الاختبارات",-1)),u("div",I,[r.tests.length>0?(n(!0),d(m,{key:0},f(r.tests,l=>(n(),_(w,{data:l,key:l.id},null,8,["data"]))),128)):(n(),d("p",M," لا يوجد بيانات في الواقت الحالي "))]),u("div",U,[a(x,{dir:"ltr",class:"mt-4 mx-auto",modelValue:r.currentPage,"onUpdate:modelValue":s[0]||(s[0]=l=>r.currentPage=l),"total-pages":r.totalPages,onPageChange:h.getTests,nextLabel:"التالي",previousLabel:"السابق"},null,8,["modelValue","total-pages","onPageChange"])]),r.results.length>0?(n(),_(P,{key:0},{default:e(()=>[a(y,null,{default:e(()=>[a(c,{class:"text-start"},{default:e(()=>s[1]||(s[1]=[i("رقم الاختبار")])),_:1}),a(c,{class:"text-start"},{default:e(()=>s[2]||(s[2]=[i("العنوان")])),_:1}),a(c,{class:"text-start"},{default:e(()=>s[3]||(s[3]=[i("النتيجة")])),_:1})]),_:1}),a(F,null,{default:e(()=>[(n(!0),d(m,null,f(r.results,(l,C)=>(n(),_(k,{key:l.id},{default:e(()=>[a(b,{class:"text-start"},{default:e(()=>[i(p(C+1),1)]),_:2},1024),a(b,{class:"text-start text-primary"},{default:e(()=>[a(T,{to:`/bahaaedu/tests/answers/${l.test_id}`},{default:e(()=>[i(p(l.test_name),1)]),_:2},1032,["to"])]),_:2},1024),a(b,{class:"text-start text-nowrap"},{default:e(()=>[i(p(l.result),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):H("",!0)])])}const W=v(q,[["render",G]]);export{W as default};
