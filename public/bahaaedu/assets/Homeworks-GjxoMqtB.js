import{_ as v,s as B,N as H,p as V,m as N,q as $,x as z,y as A,z as L,u as R,a as p,r as l,o as n,c as d,b as u,F as h,l as g,j as o,d as b,w as e,e as j,f as i,t as _}from"./index-ClkC-KWi.js";import{C as S}from"./Card-CMWg7rRX.js";const q={name:"Homeworks",components:{Card:S,FwbPagination:B,FwbA:H,FwbTable:V,FwbTableBody:N,FwbTableCell:$,FwbTableHead:z,FwbTableHeadCell:A,FwbTableRow:L},data(){return{homeworks:[],results:[],limit:30,currentPage:1,totalPages:1,toast:R()}},mounted(){this.getHomeworks(),this.latestResults()},methods:{getHomeworks(){p.get(`/homeworks/all/${this.limit*this.currentPage}`,{headers:{Authorization:`Bearer ${this.$store.state.token}`}}).then(t=>{this.homeworks=t.data,this.totalPages=Math.ceil(t.data.length/this.limit)}).catch(t=>{t.response&&t.response.status===401&&(this.toast.error("خطأ: غير مصرح به"),this.$store.commit("logout"),this.$router.push("/bahaaedu/login"))})},latestResults(){p.get("/homeworks/results",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(t=>{this.results=t.data}).catch(t=>{t.response&&t.response.status===401&&(this.toast.error("خطأ: غير مصرح به"),this.$store.commit("logout"),this.$router.push("/bahaaedu/login"))})}}},D={class:"w-full grid place-items-center"},E={class:"homeworks mt-10 max-w-screen-xl px-4 sm:px-6 lg:px-8 flex flex-col gap-5"},I={class:"homeworks grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},M={key:1,class:"p-4 border border-gray-300 rounded-lg"},U={class:"page-navigation w-full flex justify-center"};function G(t,s,J,K,r,w){const f=l("Card"),k=l("FwbPagination"),c=l("fwb-table-head-cell"),x=l("fwb-table-head"),m=l("fwb-table-cell"),y=l("router-link"),F=l("fwb-table-row"),P=l("fwb-table-body"),C=l("fwb-table");return n(),d("main",D,[u("div",E,[s[4]||(s[4]=u("h2",{class:"text-xl font-bold mb-4"},"الواجبات",-1)),u("div",I,[r.homeworks.length>0?(n(!0),d(h,{key:0},g(r.homeworks,a=>(n(),b(f,{data:a,key:a.id},null,8,["data"]))),128)):(n(),d("p",M," لا يوجد بيانات في الواقت الحالي "))]),u("div",U,[o(k,{dir:"ltr",class:"mt-4 mx-auto",modelValue:r.currentPage,"onUpdate:modelValue":s[0]||(s[0]=a=>r.currentPage=a),"total-pages":r.totalPages,onPageChange:w.getHomeworks,nextLabel:"التالي",previousLabel:"السابق"},null,8,["modelValue","total-pages","onPageChange"])]),r.results.length>0?(n(),b(C,{key:0},{default:e(()=>[o(x,null,{default:e(()=>[o(c,{class:"text-start"},{default:e(()=>s[1]||(s[1]=[i("رقم الواجب")])),_:1}),o(c,{class:"text-start"},{default:e(()=>s[2]||(s[2]=[i("العنوان")])),_:1}),o(c,{class:"text-start"},{default:e(()=>s[3]||(s[3]=[i("النتيجة")])),_:1})]),_:1}),o(P,null,{default:e(()=>[(n(!0),d(h,null,g(r.results,(a,T)=>(n(),b(F,{key:a.id},{default:e(()=>[o(m,{class:"text-start"},{default:e(()=>[i(_(T+1),1)]),_:2},1024),o(m,{class:"text-start text-primary"},{default:e(()=>[o(y,{to:`/bahaaedu/homeworks/answers/${a.homework_id}`},{default:e(()=>[i(_(a.homework_name),1)]),_:2},1032,["to"])]),_:2},1024),o(m,{class:"text-start text-nowrap"},{default:e(()=>[i(_(a.result),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):j("",!0)])])}const W=v(q,[["render",G]]);export{W as default};
